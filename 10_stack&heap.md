# Stack & Heap

(가볍게 다룰 것임)

> `스택` & `힙` = 저장할 때 사용하는 공간

- 현대적인 프로그래밍 언어에서 사용할 수 있는 자료는 크게 두 가지로 구분한다.  
  (기본 자료형 & 복합 자료형)

  > 기본 자료형 : 숫자, 문자열, 불 (`스택`에 저장)  
  > 복합 자료형 : 배열, 함수, 객체 (`힙`에 저장))

- 복합 자료형은 기본 자료형보다 훨씬 크기에, (배열에는 수백만 개의 데이터가 들어가기도 함)  
  코드 실행기는 이 두 자료형을 서로 다른 곳에 저장한다.

  > `스택` : 기본 자료형, 주소 등을 저장하는 메모리 공간  
  > `힙` : 복합 자료형을 저장하는 메모리 공간

---

## Stack

- 착착 쌓는 것을 의미
- 작은 자료들이 착착 쌓이는 형태로 구성됨
- 변수, 상수가 생성되면 이 `스택`의 상자 하나하나에 자료가 저장되고, 각 상자에 이름을 붙이는 것.

> 기본 자료형, 주소(저장된 자료의 위치) 등을 저장하는 메모리 공간

## Heap

- 아무렇게나 쌓아두는 것을 의미
- 아주 큰 자료들이 대충 널려서 쌓이게 됨
- 복합 자료형은 `힙`에 저장이 되고, 그 **주소가 `스택`의 상자에 저장된다.**  
  (우리가 그 자료를 찾으면, `스택`에서 주소를 확인해 알아서 `힙`에서 찾아서 들고와 주는 것)

- 레퍼런스한다 : `스택`의 주소가 `힙`의 자료를 가리키는 것
- 레퍼런스 변수 : `스택`에 저장된 것 중 **주소**가 저장된 변수

> 복합 자료형을 저장하는 메모리 공간

---

# 파괴적 처리과 비파괴적 처리

---

## 파괴적 처리

- 연산을 했는데 원본이 변경된 경우
  - ex. 배열에 `.push()` method 등을 사용한 경우

## 비파괴적 처리

- 연산을 했는데 원본이 변경되지 않는 경우
  - ex. `let a = 10;` `let b = 20;` 일 때, `a + b`를 해도 a와 b의 값은 변하지 않는다.

---

## 파괴적 처리와 비파괴적 처리의 원리

- `스택`의 기본 자료형들은 크기가 작아, 더하기 연산 등을 해도 컴퓨터에 큰 영향을 끼치지 않지만, `힙`에 저장되는 복합 자료형들은 크기가 매우 크기에 `힙`에 저장된 주소가 `스택`에 들어가고, `스택`의 주소와 `힙`은 연결된 관계가 된다.
- 만약 .push() 등의 메서드가 비파괴적으로 처리되려면 자료를 하나 더 복제한 후 처리하고, 그 주소를 `스택`에 다시 저장하면 될 일이다. 하지만 자바스크립트는 1995년 경에 만들어졌고, 그 때 당시의 컴퓨터는 메모리가 굉장히 부족했기에 엄청나게 커질 가능성이 있는 배열을 복제해 생성하는 것이 컴퓨터에게 부담이었다. 그래서 복제해 생성하는 것을 포기하고, 기존의 자료를 직접 수정하는 파괴적 방법을 택했던 것이다.
- 현대의 컴퓨터 메모리는 매우 커졌기에 `힙`에 복제해 저장해도 무리가 없어 원본은 두고, 복제해서 처리하는 비파괴적 처리를 더 많이 한다. 그래서 **2010년 이후에 추가된 자바스크립트 메서드들은 비파괴적 처리를 한다.**  
  (함수의 이름만 보고는 파괴적/비파괴적 처리를 하는지 구분할 수 없다. 실제로 입력하면서 확인하거나 외우는 방법 밖에 없다.)

---

## 상수인데 왜 변경할 수 있을까? (const의 제한)

> **`const`는 `스택`에 있는 값을 변경하지 못한다.**  
> `힙`에 있는 레퍼런스 된 **복합 자료형을 조작하는 것에는 문제 X**

```JS
const a = [1, 2];

a = [2, 3]; // 에러

a.push(3, 4); // 가능
```
